if(window.clUnsupportedBrowser)throw"unsupported browser";jQuery.fn.initMenu=function(){return this.each(function(){$(".acitem",this).hide(),$("li.expand > .acitem",this).show().prev().addClass("active"),$("li h5",this).on("click",function(){var e=$(this).next(),t=this.parentNode.parentNode;return $(t).hasClass("noaccordion")?(void 0===e[0]&&(window.location.href=this.href),$(e).slideToggle("normal",function(){var e=$(this);e.is(":visible")?e.prev().addClass("active"):e.prev().removeClass("active")}),!1):e.hasClass("acitem")&&e.is(":visible")?!!$(t).hasClass("collapsible")&&($(".acitem:visible",t).first().slideUp("normal",function(){$(this).prev().removeClass("active")}),!1):e.hasClass("acitem")&&!e.is(":visible")?($(".acitem:visible",t).slideUp("normal",function(){$(this).prev().removeClass("active")}),e.slideDown("normal",function(){$(this).prev().addClass("active")}),!1):void 0})})},function(){var e=$("#rightbar");if(e.find("h5").addClass("hot").end().find(".more").remove().end().find("li").addClass("s").end().initMenu(),$("#chlang").on("change",function(){window.location.href=this.value}),CL.page.isMobile){var t=$(".cal"),a=$("#calban"),n=$("#center"),i=$("#topban").find(".mobile-menu-button");e.find(".expand h5").trigger("click");["sss","jjj","hhh","ppp","ccc","bbb","ggg","rrr"].forEach(function(e){var t=function(e){var t={},a=$("#"+e),n=a.find(".ban a"),i=n.clone().html(n.data("alltitle")).wrapAll("<li></li>").parent(),r=a;a.find("li").each(function(){t[$(this).find("a").html()]=this});var l=Object.keys(t).sort();if(l.length){for(;"["===l[0].charAt(0);)l.push(l.shift());(l=l.map(function(e){return t[e]})).unshift(i[0]),r.find(".cats").html($('<ul id="'+e+'0"></ul>').html(l))}return r}(e);$("#"+e).remove(),n.append(t)});var r=[$(".community"),$(".jobs"),a[0],t[0]].filter(function(e){return e});$.each(r,function(e,t){n.append(t)}),a.addClass("ban").on("click","a",function(e){e.preventDefault(),t.toggleClass("active-cal")}),$(".ban").filter(function(){return $(this).siblings(".cats").children().length}).on("click",function(e){var t=$(this);if("forums"!==t.parent().attr("id")){if(e.preventDefault(),t.hasClass("disabled"))return i.trigger("click"),!1;t.siblings(".cats").toggleClass("active-category")}}),n.append($(".leftlinks").show()),$("body").trigger("mobilePageReady")}var l=$("#query"),o=$("input#postal")[0],s=$("input#search_distance")[0],c=$("input#ordinal")[0],u=$("input#ratio")[0],d=$("input#clicked")[0];CL.autocomplete({type:"search-count",url:"/count-search",buildParams:function(e){var t={query:e.term};return o&&(t.postal=o.value),s&&(t.search_distance=s.value),t.ordinal=c.value,t.ratio=u.value,t.clicked=d.value,t},onSuccess:function(e,t){var a=Object.keys(e.fetched).map(function(a){var n=0,i=e.fetched[a];Object.keys(i).forEach(function(e){n+=i[e]});var r=window.categoryNames[a];return{label:"<b>"+n+"</b> &ldquo;"+t+"&rdquo; in "+r,value:t,cat:a,total:n}}).sort(function(e,t){return e.total<t.total?1:-1});a.length>1?u.value=Math.round(a[0].total/a[1].total):u.value=1;var n=1;a=a.map(function(e){return e.ordinal=n++,e});var i=(e.remembered||[]).map(function(e){var t=e.cat,a=window.categoryNames[t];return{label:"<b>"+cl.util.escapeHtml(e.term)+"</b> in "+a+'<span class="remove">&times;</span>',value:e.term,cat:t,itemToForget:e}});return a.length>0&&$("#catAbb").val(a[0].cat),a.length>0&&i.length>0?a.push({label:'<hr class="ui-autocomplete-divider">',value:""}):0===a.length&&0===i.length&&a.push({label:window.noResults+" <b>"+CL.util.escapeHtml(t)+"</b>",value:t}),a.concat(i)},onSelect:function(e,t,a,n){var i=t.item;i.value===n(l.val())?(a({term:i.value,cat:i.cat}),$("#catAbb").val(i.cat)):$("#catAbb").val(""),c.value=i.ordinal,13==e.keyCode?d.value=0:d.value=1,$("#search").submit()},remember:!0}),""!==l.val()&&l.trigger("focus");var f=CL.url.params();if("US"===window.areaCountry||null===window.areaCountry&&f.postal){CL.autocomplete({type:"subarea",buildParams:function(e){return{term:e.term}},onSelect:function(e,t){m="custom",g(t.item)},autocomplete:{autoFocus:!0}});var h=$("#topban"),v=$(".regular-area"),p=$(".custom-area"),m="",b=function(e){h.removeClass(["regular","custom","enter"].join(" ")).addClass(e),"enter"===e&&setTimeout(function(){$(".subarea-input").focus().select()},1)};v.find(".area").on("click",function(e){m="regular",e.preventDefault(),b("enter")}),p.find(".area, .radius-info").on("click",function(e){m="custom",e.preventDefault(),b("enter")}),$(".subarea-input").on("blur",function(){b(m)}).on("keydown",function(e){27===Number(e.which)&&$(this).blur()}),$(".exit-subarea").on("click",function(){g(null)});var g=function(e){var t,a=CL.url.params(window.location.search);e?(Object.assign(a,{search_distance:e.radius,postal:e.postal}),t=e.url,p.removeClass("no-name").find(".area").text(e.label).end().find(".postal").text(e.postal).end().find(".distance").text(e.radius),b("custom")):(delete a.postal,delete a.search_distance,t=window.location.hostname,b("regular")),window.location.href="//"+t+"?"+Object.keys(a).map(function(e){return e+"="+a[e]}).join("&")}}}();
/* {"sources":{"homepage-concat.js":"4aa2efbf1ff1d9c87b04347194b5a09a"}} */